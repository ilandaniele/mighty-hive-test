  
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mighty Hive Test</title>
</head>
<body>
    <div class="main-text" style="font-size:20px; text-align:center; margin: 20px 0px 40px 0px;">Mighty Hive Test</div>
    <div class="column" style="margin-bottom:30px; display:flex; flex-direction:column; align-items: center;">
      <label>Insert a key:</label>
      <input type="text" id="key1" name="key1" required style="margin-bottom:10px;">
      <label>Insert a value:</label>
      <input type="text" id="value" name="value" required style="margin-bottom:10px;">
      <button onclick="addKeyValue()" style="margin-bottom:10px;">Add</button>
      <label id="result1"></label>
    </div>
    <div class="column" style="margin-bottom:30px; display:flex; flex-direction:column; align-items: center;">
      <label>Insert a key to obtain it's value:</label>
      <input type="text" id="key2" name="key2" required style="margin-bottom:10px;">
      <button onclick="getValue()" style="margin-bottom:10px;">Get</button>
      <label id="result2"></label>
    </div>
</body>
<script>
    // Create WebSocket connection.
    const socket = new WebSocket('ws://localhost:8080');
    var connected = false;
    // socket.onopen = function(evt) { onOpen(evt) }; 
    // socket.onclose = function(evt) { onClose(evt) }; 
    // socket.onmessage = function(evt) { onMessage(evt) }; 
    // socket.onerror = function(evt) { onError(evt) }; 
    // Connection opened
    socket.addEventListener('open', function (event) {
        console.log('Connected to WebSocket Server');
        connected = true;
    });

    // Listen for messages
    socket.addEventListener('message', function (event) {
      var value = JSON.parse(event.data).value;
      if(JSON.parse(event.data).value){
        document.getElementById("result2").innerText = "Value: "+value;
      }else{
        console.log(JSON.parse(event.data));
      }
    });

    // ws.addEventListener("error", e => {
    //   // readyState === 3 is CLOSED
    //   if (e.target.readyState === 3) {
    //     this.connectionTries--;

    //     if (this.connectionTries > 0) {
    //       setTimeout(() => this.connect(url), 5000);
    //     } else {
    //       throw new Error("Maximum number of connection trials has been reached");
    //     }

    //   }
    // });
    socket.addEventListener('error', function (event){
      if (e.target.readyState === 3) {
        connected = false;
      }
    });

    const addKeyValue = () => {
      var k = document.getElementById("key1").value;
      var v = document.getElementById("value").value;
      const pair = {key: k, value: v};  
      socket.send(JSON.stringify({key:k, value:v}));
      document.getElementById("result1").innerText = "Key: '"+k+"' and value: '"+v+"' successfully added";
    }

    const getValue = (key) => {
      var k = document.getElementById("key2").value;
      socket.send(JSON.stringify({key:k}));
    }

</script>
</html>